<div class="bg-white rounded-lg shadow-md p-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Speaker Availability Poll</h2>
            <p class="text-gray-600 mb-6">Click a cell to mark availability. âœ“ = Available | âœ— = Unavailable</p>
            
            <div class="mb-6">
                <h3 class="font-bold text-gray-800 mb-3">Add Speaker</h3>
                <div class="flex gap-2">
                    <input 
                        type="text" 
                        id="speakerInput" 
                        placeholder="Enter speaker name" 
                        class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    />
                    <button 
                        onclick="addSpeaker()" 
                        class="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition font-medium"
                    >
                        Add Speaker
                    </button>
                </div>
            </div>

            <div class="overflow-x-auto mb-6">
                <table class="w-full border-collapse" id="pollTable">
                    <thead>
                        <tr class="border-b-2 border-gray-300">
                            <th class="text-left py-3 px-4 font-bold text-gray-800">Speaker Name</th>
                            <th class="text-center py-3 px-4 font-medium text-gray-700 border-l border-gray-200">Week 1<br>(July 21-25)</th>
                            <th class="text-center py-3 px-4 font-medium text-gray-700 border-l border-gray-200">Week 2<br>(August 4-8)</th>
                            <th class="text-center py-3 px-4 font-medium text-gray-700 border-l border-gray-200">Week 3<br>(Sept 1-5)</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                    </tbody>
                </table>
            </div>

            <div class="bg-gray-50 p-4 rounded-lg mb-6">
                <h3 class="font-bold text-gray-800 mb-3">Summary</h3>
                <div class="grid grid-cols-3 gap-4" id="summary">
                    <div class="text-center">
                        <p class="text-gray-600 text-sm">Week 1</p>
                        <p class="text-2xl font-bold text-green-600"><span id="week1-count">0</span> / <span id="total">0</span></p>
                    </div>
                    <div class="text-center">
                        <p class="text-gray-600 text-sm">Week 2</p>
                        <p class="text-2xl font-bold text-green-600"><span id="week2-count">0</span> / <span id="total">0</span></p>
                    </div>
                    <div class="text-center">
                        <p class="text-gray-600 text-sm">Week 3</p>
                        <p class="text-2xl font-bold text-green-600"><span id="week3-count">0</span> / <span id="total">0</span></p>
                    </div>
                </div>
            </div>

            <button 
                onclick="downloadData()" 
                class="w-full px-4 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition font-medium"
            >
                ðŸ“¥ Download Results (JSON)
            </button>
        </div>
    </div>
</div>

<script>
    let speakers = [];
    let availability = {};

    function renderTable() {
        const tbody = document.getElementById('tableBody');
        tbody.innerHTML = '';
        
        speakers.forEach((speaker, index) => {
            const row = document.createElement('tr');
            row.className = 'border-b border-gray-200 hover:bg-gray-50';
            
            let cellsHTML = `<td class="py-3 px-4 font-medium text-gray-800">
                <div class="flex items-center justify-between">
                    <span>${speaker}</span>
                    <button onclick="removeSpeaker(${index})" class="text-red-500 hover:text-red-700 text-xs ml-2">âœ•</button>
                </div>
            </td>`;
            
            for (let week = 1; week <= 3; week++) {
                const key = speaker + '-' + week;
                const status = availability[key];
                
                cellsHTML += `<td class="text-center py-3 px-4 border-l border-gray-200">
                    <div class="flex gap-1 justify-center">
                        <button 
                            onclick="toggleAvailability('${speaker}', ${week}, 'available')"
                            class="px-3 py-2 rounded transition ${status === 'available' ? 'bg-green-100 text-green-600 font-bold' : 'bg-gray-100 text-gray-400 hover:bg-green-50'}"
                        >
                            âœ“
                        </button>
                        <button 
                            onclick="toggleAvailability('${speaker}', ${week}, 'unavailable')"
                            class="px-3 py-2 rounded transition ${status === 'unavailable' ? 'bg-red-100 text-red-600 font-bold' : 'bg-gray-100 text-gray-400 hover:bg-red-50'}"
                        >
                            âœ—
                        </button>
                    </div>
                </td>`;
            }
            
            row.innerHTML = cellsHTML;
            tbody.appendChild(row);
        });
        
        updateSummary();
    }

    function addSpeaker() {
        const input = document.getElementById('speakerInput');
        const name = input.value.trim();
        
        if (name && !speakers.includes(name)) {
            speakers.push(name);
            input.value = '';
            renderTable();
        }
    }

    function removeSpeaker(index) {
        const speaker = speakers[index];
        speakers.splice(index, 1);
        
        // Remove all availability entries for this speaker
        for (let week = 1; week <= 3; week++) {
            delete availability[speaker + '-' + week];
        }
        
        renderTable();
    }

    function toggleAvailability(speaker, week, status) {
        const key = speaker + '-' + week;
        
        if (availability[key] === status) {
            delete availability[key];
        } else {
            availability[key] = status;
        }
        
        renderTable();
    }

    function updateSummary() {
        const total = speakers.length;
        document.getElementById('total').textContent = total;
        document.getElementById('week1-count').textContent = speakers.filter(s => availability[s + '-1'] === 'available').length;
        document.getElementById('week2-count').textContent = speakers.filter(s => availability[s + '-2'] === 'available').length;
        document.getElementById('week3-count').textContent = speakers.filter(s => availability[s + '-3'] === 'available').length;
    }

    function downloadData() {
        const data = {
            poll: 'Hackathon Keynote Speaker Scheduling',
            event: 'Machine Learning Methods for Overlapping Signals in LISA',
            weeks: [
                { week: 1, period: 'July 21-25, 2026' },
                { week: 2, period: 'August 4-8, 2026' },
                { week: 3, period: 'September 1-5, 2026' }
            ],
            speakers,
            availability,
            exportDate: new Date().toISOString()
        };
        
        const json = JSON.stringify(data, null, 2);
        const blob = new Blob([json], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'speaker-poll-results.json';
        a.click();
        URL.revokeObjectURL(url);
    }

    // Allow Enter key to add speaker
    document.getElementById('speakerInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            addSpeaker();
        }
    });
</script>
